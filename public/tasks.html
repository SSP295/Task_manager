let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

function saveTasks() {
  localStorage.setItem('tasks', JSON.stringify(tasks));
}

async function loadTasks() {
  const taskList = document.getElementById('taskList');
  taskList.innerHTML = '';
  tasks.forEach(task => {
    const div = document.createElement('div');
    div.classList.add('task-item');
    div.innerHTML = `
      <strong>${task.title}</strong> (${task.priority}) - ${task.isCompleted ? '✔ Done' : '❌ Pending'}
      <button onclick="deleteTask('${task.id}')">Delete</button>
    `;
    taskList.appendChild(div);
  });
}

function deleteTask(id) {
  tasks = tasks.filter(task => task.id !== id);
  saveTasks();
  loadTasks();
}

document.getElementById('taskForm').addEventListener('submit', (e) => {
  e.preventDefault();
  const title = document.getElementById('title').value;
  const description = document.getElementById('description').value;
  const priority = document.getElementById('priority').value;
  const isCompleted = document.getElementById('isCompleted').checked;

  const newTask = {
    id: Date.now().toString(),
    title,
    description,
    priority,
    isCompleted
  };

  tasks.push(newTask);
  saveTasks();
  document.getElementById('taskForm').reset();
  loadTasks();
});

loadTasks();
