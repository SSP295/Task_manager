<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Manager</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="task-container">
    <h2>Your Tasks</h2>
    <form id="taskForm">
      <input type="text" id="title" placeholder="Task Title" required>
      <textarea id="description" placeholder="Description"></textarea>
      <select id="priority" required>
        <option value="">Select Priority</option>
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
      </select>
      <label>
        Completed <input type="checkbox" id="isCompleted">
      </label>
      <button type="submit">Add Task</button>
    </form>
    <div id="taskList"></div>
    <a href="/" class="back-link">← Logout</a>
  </div>

  <!-- ✅ Proper script block -->
  <script>
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function loadTasks() {
      const taskList = document.getElementById('taskList');
      taskList.innerHTML = '';
      tasks.forEach(task => {
        const div = document.createElement('div');
        div.classList.add('task-item');
        div.innerHTML = `
          <strong>${task.title}</strong> (${task.priority}) - ${task.isCompleted ? '✔ Done' : '❌ Pending'}
          <button onclick="deleteTask('${task.id}')">Delete</button>
        `;
        taskList.appendChild(div);
      });
    }

    function deleteTask(id) {
      tasks = tasks.filter(task => task.id !== id);
      saveTasks();
      loadTasks();
    }

    document.getElementById('taskForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const description = document.getElementById('description').value;
      const priority = document.getElementById('priority').value;
      const isCompleted = document.getElementById('isCompleted').checked;

      const newTask = {
        id: Date.now().toString(),
        title,
        description,
        priority,
        isCompleted
      };

      tasks.push(newTask);
      saveTasks();
      document.getElementById('taskForm').reset();
      loadTasks();
    });

    loadTasks();
  </script>
</body>
</html>
